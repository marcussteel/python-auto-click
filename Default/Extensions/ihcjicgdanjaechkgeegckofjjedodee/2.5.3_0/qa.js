window.chrome=chrome||window.chrome||window.browser,window.chrome.runtime.getURL(""),(()=>{"use strict";Object.freeze({LicenseStateUnknown:0,LicenseStateFree:1,LicenseStateTrial:2,LicenseStateTrialExpired:3,LicenseStateLicensed:4,LicenseStateLicenseExpired:5,LicenseStateLicenseGrace:6});const e="MSG_INT_VER",r="MSG_IS_LAYER_ACTIVE";let t=window.chrome||window.browser||browser;navigator.userAgent.includes("Edge/")&&(t=window.browser),document.addEventListener("DOMContentLoaded",(function(){new Promise(((e,r)=>{t.runtime.sendMessage({type:"MSG_USER_GROUP_GET"},(function(r){!r||r.error?console.error("Error fetching AB group",r):$(".value-ab-group").text("GROUP_A"===r.success?"A":"B"),e()}))})).then((e=>{t.runtime.sendMessage({type:"MSG_UUID_GET"},(function(e){return!e||e.error?console.error("Error fetching UUID",e):$(".value-uuid").text(e.success),Promise.resolve()}))})).then((r=>{t.runtime.sendMessage({type:e},(function(e){return!e||e.error?console.error("Error fetching int ver",e):$(".value-internal-version").text(e.success),Promise.resolve()}))})).then((r=>{t.runtime.sendMessage({type:e},(function(e){return!e||e.error?console.error("Error fetching int ver",e):$(".value-internal-version").text(e.success),Promise.resolve()}))})).then((e=>{})),$("#check-layers-url").val("http://www.malwarebytes.com"),$("#check-layers-btn").on("click",(function(){var e;e=$("#check-layers-url").val(),console.log("Checking layers for "+e),$(".value-global-active").text("--"),$(".value-malware-layer-active").text("--"),$(".value-scam-layer-active").text("--"),$(".value-ads-layer-active").text("--"),$(".value-pups-layer-active").text("--"),t.storage.local.get("enableProtection",(function(e){t.runtime.lastError?console.error("Can't check global layer: ",t.runtime.lastError):$(".value-global-active").text(!1===e.enableProtection?"No":"Yes")})),t.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_MALWARE",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-malware-layer-active").text(e.success?"Yes":"No"),Promise.resolve()})),t.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_SCAMS",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-scam-layer-active").text(e.success?"Yes":"No"),Promise.resolve()})),t.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_ADS",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-ads-layer-active").text(e.success?"Yes":"No"),Promise.resolve()})),t.runtime.sendMessage({type:r,payload:{exclConst:"EXCLUSION_PUPS",url:e}},(function(e){return!e||e.error?console.error("Error fetching layer",e):$(".value-pups-layer-active").text(e.success?"Yes":"No"),Promise.resolve()}))}))}))})();